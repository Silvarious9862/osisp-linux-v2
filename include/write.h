#ifndef WRITE_H
#define WRITE_H

#include "scan.h"  // Для определения структуры scan_data

/**
 * write_sorted_result() – записывает изменения, выполненные над отображённой областью,
 * обратно в файл.
 *
 * @data: указатель на структуру scan_data, которая содержит адрес отображённой области (map_ptr),
 *        размер области (memsize) и открытый дескриптор файла (fd).
 *
 * Функция вызывает msync() для синхронизации изменений из памяти с файлом.
 * Если msync() завершилось ошибкой, функция возвращает -1; в случае успеха – 0.
 *
 * Примечание: Если файл не целиком помещается в область отображения, то после записи
 * отсортированного результата (и освобождения текущего отображения) необходимо повторить
 * обработку следующей части файла. Эта логика должна контролироваться на уровне основного
 * потока (например, в sort_index.c), поэтому данный модуль отвечает только за запись текущего блока.
 */
int write_sorted_result(scan_data *data);

#endif // WRITE_H
